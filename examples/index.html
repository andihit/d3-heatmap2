<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>d3-heatmap</title>
	
	<!-- Google Font -->
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400' rel='stylesheet' type='text/css'>

	<!-- d3-heatmap -->
	<link href='d3-heatmap.css' rel='stylesheet' type='text/css'>

	<style>
		html { font-size: 62.5%; } 
		body {
		  	font-size: 1rem;
		  	font-family: 'Open Sans', sans-serif;
		  	font-weight: 400;
		  	fill: #8C8C8C;
		  	text-align: center;
		}
		.details {
			margin-top: 30px;
			font-family: 'Open Sans', sans-serif;
			font-size: 1.4rem;
			color: #8C8C8C;
		}
	</style>
	
</head>	
<body>
	<div id="chart"></div>
	<div id="details" class="details"></div>
	<!-- D3.js -->
	<script src="https://d3js.org/d3.v4.min.js" charset="utf-8"></script>
	
	<!-- d3-heatmap -->
	<script src="d3-heatmap.js"></script>

	<script>
		d3.json("data.json", function(error, data) {
			if (error) return console.warn(error)
			function onClick(d, i, j) {
				console.info("Clicked on range " + data.rows[j] + ", time " + data.columns[i] + ", count " + d)
			}

			function onMouseOver(d, i, j) {
				document.getElementById("details").innerHTML = "time: " + data.columns[i] + ", range: " + data.rows[j] + ", count: " + d
			}
		
			var h = d3.heatmap()
				.title("Latency Heatmap")
				.subtitle("github.com/spiermar/d3-heatmap")
				.legendLabel("Count")
				.width(Math.max(Math.min(window.innerWidth, 1440), 960) - 20)
				.xAxisScale([0,122])
				.yAxisScale([106,1999])
				// .xAxisLabels(data.columns)
				// .yAxisLabels(data.rows)
				.onClick(onClick)
				.onMouseOver(onMouseOver)
				.colorScale(d3.scaleLinear()
					.domain([0, 65 / 2, 65])
					.range(['#F5F5DC', '#FF5032', '#E50914'])
				)
				
			d3.select("#chart")
				.datum(data.values)
				.call(h)
		})
	</script>
</body>
</html>