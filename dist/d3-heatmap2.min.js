!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.d3=t.d3||{})}(this,function(t){"use strict";t.heatmap=function(){var t=null,e="",n="",r="",a=960,l={top:20,right:0,bottom:0,left:0},i=null,o=null,s=null,c=null,u=d3.format(".0f"),f=d3.format(".2s"),d=null,g=null,h=function(t){return t},p=function(t){return t},x=!1,m=null,y=null,b=[];function L(){b&&b.length>0&&t&&i?t.selectAll("g.highlight").remove().data(b,function(t){return e=t[0],n=t[1],(e+n)*(e+n+1)/2+n;var e,n}).enter().append("g").attr("class","highlight").append("rect").attr("x",function(t){return t[0]*i}).attr("y",function(t){return t[1]*i}).attr("width",i).attr("height",i).style("fill","#ff69b4").style("fill-opacity","0.6"):console.log("Error: Can't update highlight. Heatmap was not initialized or highlight was not defined.")}function v(v){var A=v.datum(),k=A.length,w=A[0].length,F=(i=Math.floor(a/k))*(w+2);e&&(l.top=l.top+50),n&&(l.top=l.top+20),x||(l.bottom=l.bottom+50),(c||g)&&(l.left=l.left+50);var M=0;for(let t=0;t<A.length;t++)for(let e=0;e<A[t].length;e++)A[t][e]>M&&(M=A[t][e]);if(o||(o=d3.scaleLinear().domain([0,M/2,M]).range(["#FFFFDD","#3E9583","#1F2D86"])),t=v.append("svg").attr("width",a+l.left+l.right).attr("height",F+l.top+l.bottom).append("g").attr("transform","translate("+l.left+","+l.top+")"),c||g)if(c){var T=d3.scaleLinear().domain(c).range([F,0]);t.append("g").attr("transform","translate(3,-12)").attr("class","rowLabel axis").call(d3.axisLeft(T).ticks(20).tickFormat(f))}else t.selectAll(".rowLabel").data(g).enter().append("text").text(p).attr("x",0).attr("y",function(t,e){return e*i}).style("text-anchor","end").attr("transform","translate(-6,"+i/1.2+")").attr("class","rowLabel mono axis");if(s||d)if(s){var D=d3.scaleLinear().domain(s).range([0,a-l.left-l.right-40]);t.append("g").attr("transform","translate(5,3)").attr("class","columnLabel axis").call(d3.axisTop(D).ticks(20).tickFormat(u))}else t.selectAll(".columnLabel").data(d).enter().append("text").text(h).attr("y",function(t,e){return e*i}).attr("x",0).style("text-anchor","beginning").attr("transform","translate("+i/1.4+", -6) rotate(270)").attr("class","columnLabel mono axis");if(t.selectAll("g.column").data(A).enter().append("g").each(function(t,e){d3.select(this).selectAll("rect").data(t).enter().append("rect").attr("x",function(t){return e*i}).attr("y",function(t,e){return e*i}).attr("class","bordered").attr("width",i).attr("height",i).style("stroke","white").style("stroke-opacity",.6).style("fill",function(t){return o(t)}).on("mouseover",function(t,n){return function(t,e,n){"function"==typeof y&&y(t,e,n)}(t,e,n)}).on("click",function(t,n){return function(t,e,n){"function"==typeof m&&m(t,e,n)}(t,e,n)})}),b&&b.length>0&&L(),e&&t.append("text").attr("class","title").attr("x",a/2).attr("y",-60).style("text-anchor","middle").text(e),n&&t.append("text").attr("class","subtitle").attr("x",a/2).attr("y",-40).style("text-anchor","middle").text(n),!x){var H=d3.scaleLinear().domain([0,M]).range([0,a]),S=H.domain(),j=[];S[2]=S[1]-S[0];for(var C=0;C<10;C++)j.push(C*S[2]/9+S[0]);t.append("defs").append("linearGradient").attr("id","legend-traffic").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").selectAll("stop").data(d3.range(10)).enter().append("stop").attr("offset",function(t,e){return H(j[e])/a}).attr("stop-color",function(t,e){return o(j[e])});var E=Math.min(.8*a,400),O=t.append("g").attr("class","legendWrapper").attr("transform","translate("+a/2+","+(i*w+40)+")");O.append("rect").attr("class","legendRect").attr("x",-E/2).attr("y",0).attr("width",E).attr("height",10).style("fill","url(#legend-traffic)"),O.append("text").attr("class","legendTitle").attr("x",0).attr("y",-10).style("text-anchor","middle").text(r);var _=d3.scaleLinear().range([-E/2,E/2]).domain([0,M]),z=d3.axisBottom().ticks(5).scale(_);O.append("g").attr("class","axis").attr("transform","translate(0,10)").call(z)}}return v.title=function(t){return arguments.length?(e=t,v):e},v.subtitle=function(t){return arguments.length?(n=t,v):n},v.legendLabel=function(t){return arguments.length?(r=t,v):r},v.width=function(t){return arguments.length?(a=t,v):a},v.margin=function(t){return arguments.length?(l=t,v):l},v.colorScale=function(t){return arguments.length?(o=t,v):o},v.xAxisScale=function(t){return arguments.length?(s=t,v):s},v.yAxisScale=function(t){return arguments.length?(c=t,v):c},v.xAxisLabelFormat=function(t){return arguments.length?(h=t,v):h},v.yAxisLabelFormat=function(t){return arguments.length?(p=t,v):p},v.xAxisTickFormat=function(t){return arguments.length?(u=t,v):u},v.yAxisTickFormat=function(t){return arguments.length?(f=t,v):f},v.hideLegend=function(t){return arguments.length?(x=t,v):x},v.onClick=function(t){return arguments.length?(m=t,v):m},v.onMouseOver=function(t){return arguments.length?(y=t,v):y},v.xAxisLabels=function(t){return arguments.length?(d=t,v):d},v.yAxisLabels=function(t){return arguments.length?(g=t,v):g},v.setHighlight=function(t){return arguments.length?(b=t,v):b},v.updateHighlight=L,v},Object.defineProperty(t,"__esModule",{value:!0})});