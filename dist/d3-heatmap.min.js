!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.d3=t.d3||{})}(this,function(t){"use strict";t.heatmap=function(){var t={top:170,right:50,bottom:70,left:50};return function(e){var a=e.datum(),r=a.rows,n=a.columns,l=a.values,o=0;for(let t=0;t<l.length;t++)for(let e=0;e<l[t].length;e++)l[t][e]>o&&(o=l[t][e]);var s=Math.max(Math.min(window.innerWidth,1440),960)-t.left-t.right-20,i=Math.floor(s/n.length),d=i*(r.length+2),c=e.append("svg").attr("width",s+t.left+t.right).attr("height",d+t.top+t.bottom).append("g").attr("transform","translate("+t.left+","+t.top+")"),p=d3.scale.linear().domain([0,o/2,o]).range(["#FFFFDD","#3E9583","#1F2D86"]);c.selectAll(".rowLabel").data(r.reverse()).enter().append("text").text(function(t){return t}).attr("x",0).attr("y",function(t,e){return e*i}).style("text-anchor","end").attr("transform","translate(-6,"+i/1.5+")").attr("class","rowLabel mono axis"),c.selectAll(".columnLabel").data(n).enter().append("text").text(function(t){return t}).attr("x",function(t,e){return e*i}).attr("y",0).style("text-anchor","middle").attr("transform","translate("+i/2+", -6)").attr("class","columnLabel mono axis"),c.selectAll("g").data(l).enter().append("g").each(function(t,e){d3.select(this).selectAll("rect").data(t.reverse()).enter().append("rect").attr("x",function(t){return e*i}).attr("y",function(t,e){return e*i}).attr("class","hour bordered").attr("width",i).attr("height",i).style("stroke","white").style("stroke-opacity",.6).style("fill",function(t){return p(t)})}),c.append("text").attr("class","title").attr("x",s/2).attr("y",-90).style("text-anchor","middle").text("Latency Heatmap"),c.append("text").attr("class","subtitle").attr("x",s/2).attr("y",-60).style("text-anchor","middle").text("github.com/spiermar/d3-heatmap");var f=d3.scale.linear().domain([0,o]).range([0,s]),u=f.domain(),h=[];u[2]=u[1]-u[0];for(var m=0;m<10;m++)h.push(m*u[2]/9+u[0]);c.append("defs").append("linearGradient").attr("id","legend-traffic").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").selectAll("stop").data(d3.range(10)).enter().append("stop").attr("offset",function(t,e){return f(h[e])/s}).attr("stop-color",function(t,e){return p(h[e])});var x=Math.min(.8*s,400),g=c.append("g").attr("class","legendWrapper").attr("transform","translate("+s/2+","+(i*r.length+40)+")");g.append("rect").attr("class","legendRect").attr("x",-x/2).attr("y",0).attr("width",x).attr("height",10).style("fill","url(#legend-traffic)"),g.append("text").attr("class","legendTitle").attr("x",0).attr("y",-10).style("text-anchor","middle").text("Count");var y=d3.scale.linear().range([-x/2,x/2]).domain([0,o]),v=d3.svg.axis().orient("bottom").ticks(5).scale(y);g.append("g").attr("class","axis").attr("transform","translate(0,10)").call(v)}},Object.defineProperty(t,"__esModule",{value:!0})});