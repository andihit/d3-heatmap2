!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.d3=t.d3||{})}(this,function(t){"use strict";t.heatmap=function(){var t="",e="",n="",r=960,a={top:20,right:0,bottom:0,left:0},l=null,o=null,i=null,s=d3.format(".0f"),c=d3.format(".2s"),u=null,f=null,d=function(t){return t},p=function(t){return t},g=!1,h=null,x=null;function m(m){var y=m.datum(),b=y.length,L=y[0].length;t&&(a.top=a.top+50),e&&(a.top=a.top+20),g||(a.bottom=a.bottom+50),(i||f)&&(a.left=a.left+50);var v=Math.floor(r/b),A=v*(L+2),k=0;for(let t=0;t<y.length;t++)for(let e=0;e<y[t].length;e++)y[t][e]>k&&(k=y[t][e]);l||(l=d3.scaleLinear().domain([0,k/2,k]).range(["#FFFFDD","#3E9583","#1F2D86"]));var F=m.append("svg").attr("width",r+a.left+a.right).attr("height",A+a.top+a.bottom).append("g").attr("transform","translate("+a.left+","+a.top+")");if(i||u)if(i){var w=d3.scaleLinear().domain(i).range([A,0]);F.append("g").attr("transform","translate(3,-12)").attr("class","rowLabel axis").call(d3.axisLeft(w).ticks(20).tickFormat(c))}else F.selectAll(".rowLabel").data(f).enter().append("text").text(p).attr("x",0).attr("y",function(t,e){return e*v}).style("text-anchor","end").attr("transform","translate(-6,"+v/1.2+")").attr("class","rowLabel mono axis");if(o||u)if(o){var M=d3.scaleLinear().domain(o).range([0,r-a.left-a.right-40]);F.append("g").attr("transform","translate(5,3)").attr("class","columnLabel axis").call(d3.axisTop(M).ticks(20).tickFormat(s))}else F.selectAll(".columnLabel").data(u).enter().append("text").text(d).attr("y",function(t,e){return e*v}).attr("x",0).style("text-anchor","beginning").attr("transform","translate("+v/1.4+", -6) rotate(270)").attr("class","columnLabel mono axis");if(F.selectAll("g.column").data(y).enter().append("g").each(function(t,e){d3.select(this).selectAll("rect").data(t).enter().append("rect").attr("x",function(t){return e*v}).attr("y",function(t,e){return e*v}).attr("class","bordered").attr("width",v).attr("height",v).style("stroke","white").style("stroke-opacity",.6).style("fill",function(t){return l(t)}).on("mouseover",function(t,n){return function(t,e,n){"function"==typeof x&&x(t,e,n)}(t,e,n)}).on("click",function(t,n){return function(t,e,n){"function"==typeof h&&h(t,e,n)}(t,e,n)})}),t&&F.append("text").attr("class","title").attr("x",r/2).attr("y",-60).style("text-anchor","middle").text(t),e&&F.append("text").attr("class","subtitle").attr("x",r/2).attr("y",-40).style("text-anchor","middle").text(e),!g){var T=d3.scaleLinear().domain([0,k]).range([0,r]),D=T.domain(),S=[];D[2]=D[1]-D[0];for(var j=0;j<10;j++)S.push(j*D[2]/9+D[0]);F.append("defs").append("linearGradient").attr("id","legend-traffic").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").selectAll("stop").data(d3.range(10)).enter().append("stop").attr("offset",function(t,e){return T(S[e])/r}).attr("stop-color",function(t,e){return l(S[e])});var O=Math.min(.8*r,400),_=F.append("g").attr("class","legendWrapper").attr("transform","translate("+r/2+","+(v*L+40)+")");_.append("rect").attr("class","legendRect").attr("x",-O/2).attr("y",0).attr("width",O).attr("height",10).style("fill","url(#legend-traffic)"),_.append("text").attr("class","legendTitle").attr("x",0).attr("y",-10).style("text-anchor","middle").text(n);var B=d3.scaleLinear().range([-O/2,O/2]).domain([0,k]),C=d3.axisBottom().ticks(5).scale(B);_.append("g").attr("class","axis").attr("transform","translate(0,10)").call(C)}}return m.title=function(e){return arguments.length?(t=e,m):t},m.subtitle=function(t){return arguments.length?(e=t,m):e},m.legendLabel=function(t){return arguments.length?(n=t,m):n},m.width=function(t){return arguments.length?(r=t,m):r},m.margin=function(t){return arguments.length?(a=t,m):a},m.colorScale=function(t){return arguments.length?(l=t,m):l},m.xAxisScale=function(t){return arguments.length?(o=t,m):o},m.yAxisScale=function(t){return arguments.length?(i=t,m):i},m.xAxisLabelFormat=function(t){return arguments.length?(d=t,m):d},m.yAxisLabelFormat=function(t){return arguments.length?(p=t,m):p},m.xAxisTickFormat=function(t){return arguments.length?(s=t,m):s},m.yAxisTickFormat=function(t){return arguments.length?(c=t,m):c},m.hideLegend=function(t){return arguments.length?(g=t,m):g},m.onClick=function(t){return arguments.length?(h=t,m):h},m.onMouseOver=function(t){return arguments.length?(x=t,m):x},m.xAxisLabels=function(t){return arguments.length?(u=t,m):u},m.yAxisLabels=function(t){return arguments.length?(f=t,m):f},m},Object.defineProperty(t,"__esModule",{value:!0})});