!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.d3=t.d3||{})}(this,function(t){"use strict";t.heatmap=function(){var t="",e="",a="",r=960,n={top:20,right:0,bottom:50,left:50},l=null,o=null,s=null,i=function(t){return t},c=function(t){return t},d=d3.format(".0f"),u=d3.format(".2s");function f(f){var p=f.datum(),g=p.rows,x=p.columns,h=p.values;t&&(n.top=n.top+50),e&&(n.top=n.top+20);var m=Math.floor(r/x.length),y=m*(g.length+2),b=0;for(let t=0;t<h.length;t++)for(let e=0;e<h[t].length;e++)h[t][e]>b&&(b=h[t][e]);l||(l=d3.scaleLinear().domain([0,b/2,b]).range(["#FFFFDD","#3E9583","#1F2D86"]));var v=f.append("svg").attr("width",r+n.left+n.right).attr("height",y+n.top+n.bottom).append("g").attr("transform","translate("+n.left+","+n.top+")");if(s){var L=d3.scaleLinear().domain(s).range([y,0]);v.append("g").attr("transform","translate(3,-12)").attr("class","rowLabel axis").call(d3.axisLeft(L).ticks(20).tickFormat(u))}else v.selectAll(".rowLabel").data(g.reverse()).enter().append("text").text(c).attr("x",0).attr("y",function(t,e){return e*m}).style("text-anchor","end").attr("transform","translate(-6,"+m/1.1+")").attr("class","rowLabel mono axis");if(o){var A=d3.scaleLinear().domain(o).range([0,r-n.left-n.right-40]);v.append("g").attr("transform","translate(5,3)").attr("class","columnLabel axis").call(d3.axisTop(A).ticks(20).tickFormat(d))}else v.selectAll(".columnLabel").data(x).enter().append("text").text(i).attr("y",function(t,e){return e*m}).attr("x",0).style("text-anchor","beginning").attr("transform","translate("+m/1.4+", -6) rotate(270)").attr("class","columnLabel mono axis");v.selectAll("g.column").data(h).enter().append("g").each(function(t,e){d3.select(this).selectAll("rect").data(t.reverse()).enter().append("rect").attr("x",function(t){return e*m}).attr("y",function(t,e){return e*m}).attr("class","bordered").attr("width",m).attr("height",m).style("stroke","white").style("stroke-opacity",.6).style("fill",function(t){return l(t)})}),t&&v.append("text").attr("class","title").attr("x",r/2).attr("y",-60).style("text-anchor","middle").text(t),e&&v.append("text").attr("class","subtitle").attr("x",r/2).attr("y",-40).style("text-anchor","middle").text(e);var F=d3.scaleLinear().domain([0,b]).range([0,r]),k=F.domain(),w=[];k[2]=k[1]-k[0];for(var T=0;T<10;T++)w.push(T*k[2]/9+k[0]);v.append("defs").append("linearGradient").attr("id","legend-traffic").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").selectAll("stop").data(d3.range(10)).enter().append("stop").attr("offset",function(t,e){return F(w[e])/r}).attr("stop-color",function(t,e){return l(w[e])});var D=Math.min(.8*r,400),M=v.append("g").attr("class","legendWrapper").attr("transform","translate("+r/2+","+(m*g.length+40)+")");M.append("rect").attr("class","legendRect").attr("x",-D/2).attr("y",0).attr("width",D).attr("height",10).style("fill","url(#legend-traffic)"),M.append("text").attr("class","legendTitle").attr("x",0).attr("y",-10).style("text-anchor","middle").text(a);var S=d3.scaleLinear().range([-D/2,D/2]).domain([0,b]),j=d3.axisBottom().ticks(5).scale(S);M.append("g").attr("class","axis").attr("transform","translate(0,10)").call(j)}return f.title=function(e){return arguments.length?(t=e,f):t},f.subtitle=function(t){return arguments.length?(e=t,f):e},f.legendLabel=function(t){return arguments.length?(a=t,f):a},f.width=function(t){return arguments.length?(r=t,f):r},f.margin=function(t){return arguments.length?(n=t,f):n},f.colorScale=function(t){return arguments.length?(l=t,f):l},f.xAxisScale=function(t){return arguments.length?(o=t,f):o},f.yAxisScale=function(t){return arguments.length?(s=t,f):s},f.xAxisLabelFormat=function(t){return arguments.length?(i=t,f):i},f.yAxisLabelFormat=function(t){return arguments.length?(c=t,f):c},f.xAxisTickFormat=function(t){return arguments.length?(d=t,f):d},f.yAxisTickFormat=function(t){return arguments.length?(u=t,f):u},f},Object.defineProperty(t,"__esModule",{value:!0})});