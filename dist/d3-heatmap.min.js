!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.d3=t.d3||{})}(this,function(t){"use strict";t.heatmap=function(){var t="",e="",n="",r=960,a={top:0,right:0,bottom:0,left:0},l=null,o=null,i=null,s=function(t){return t},c=function(t){return t},u=d3.format(".0f"),f=d3.format(".2s"),d=!1,p=!1,g=!1,h=null,x=null;function m(m){var y=m.datum(),b=y.rows,v=y.columns,L=y.values;t&&(a.top=a.top+50),e&&(a.top=a.top+20),g||(a.bottom=a.bottom+50),d||(a.top=a.top+20),p||(a.left=a.left+50);var A=Math.floor(r/v.length),k=A*(b.length+2),F=0;for(let t=0;t<L.length;t++)for(let e=0;e<L[t].length;e++)L[t][e]>F&&(F=L[t][e]);l||(l=d3.scaleLinear().domain([0,F/2,F]).range(["#FFFFDD","#3E9583","#1F2D86"]));var w=m.append("svg").attr("width",r+a.left+a.right).attr("height",k+a.top+a.bottom).append("g").attr("transform","translate("+a.left+","+a.top+")");if(!p)if(i){var M=d3.scaleLinear().domain(i).range([k,0]);w.append("g").attr("transform","translate(3,-12)").attr("class","rowLabel axis").call(d3.axisLeft(M).ticks(20).tickFormat(f))}else w.selectAll(".rowLabel").data(b.reverse()).enter().append("text").text(c).attr("x",0).attr("y",function(t,e){return e*A}).style("text-anchor","end").attr("transform","translate(-6,"+A/1.1+")").attr("class","rowLabel mono axis");if(!d)if(o){var T=d3.scaleLinear().domain(o).range([0,r-a.left-a.right-40]);w.append("g").attr("transform","translate(5,3)").attr("class","columnLabel axis").call(d3.axisTop(T).ticks(20).tickFormat(u))}else w.selectAll(".columnLabel").data(v).enter().append("text").text(s).attr("y",function(t,e){return e*A}).attr("x",0).style("text-anchor","beginning").attr("transform","translate("+A/1.4+", -6) rotate(270)").attr("class","columnLabel mono axis");if(w.selectAll("g.column").data(L).enter().append("g").each(function(t,e){d3.select(this).selectAll("rect").data(t.reverse()).enter().append("rect").attr("x",function(t){return e*A}).attr("y",function(t,e){return e*A}).attr("class","bordered").attr("width",A).attr("height",A).style("stroke","white").style("stroke-opacity",.6).style("fill",function(t){return l(t)}).on("mouseover",function(t,n){return function(t,e,n){"function"==typeof x&&x(t,e,n)}(t,e,n)}).on("click",function(t,n){return function(t,e,n){"function"==typeof h&&h(t,e,n)}(t,e,n)})}),t&&w.append("text").attr("class","title").attr("x",r/2).attr("y",-60).style("text-anchor","middle").text(t),e&&w.append("text").attr("class","subtitle").attr("x",r/2).attr("y",-40).style("text-anchor","middle").text(e),!g){var D=d3.scaleLinear().domain([0,F]).range([0,r]),H=D.domain(),S=[];H[2]=H[1]-H[0];for(var j=0;j<10;j++)S.push(j*H[2]/9+H[0]);w.append("defs").append("linearGradient").attr("id","legend-traffic").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").selectAll("stop").data(d3.range(10)).enter().append("stop").attr("offset",function(t,e){return D(S[e])/r}).attr("stop-color",function(t,e){return l(S[e])});var O=Math.min(.8*r,400),_=w.append("g").attr("class","legendWrapper").attr("transform","translate("+r/2+","+(A*b.length+40)+")");_.append("rect").attr("class","legendRect").attr("x",-O/2).attr("y",0).attr("width",O).attr("height",10).style("fill","url(#legend-traffic)"),_.append("text").attr("class","legendTitle").attr("x",0).attr("y",-10).style("text-anchor","middle").text(n);var B=d3.scaleLinear().range([-O/2,O/2]).domain([0,F]),C=d3.axisBottom().ticks(5).scale(B);_.append("g").attr("class","axis").attr("transform","translate(0,10)").call(C)}}return m.title=function(e){return arguments.length?(t=e,m):t},m.subtitle=function(t){return arguments.length?(e=t,m):e},m.legendLabel=function(t){return arguments.length?(n=t,m):n},m.width=function(t){return arguments.length?(r=t,m):r},m.margin=function(t){return arguments.length?(a=t,m):a},m.colorScale=function(t){return arguments.length?(l=t,m):l},m.xAxisScale=function(t){return arguments.length?(o=t,m):o},m.yAxisScale=function(t){return arguments.length?(i=t,m):i},m.xAxisLabelFormat=function(t){return arguments.length?(s=t,m):s},m.yAxisLabelFormat=function(t){return arguments.length?(c=t,m):c},m.xAxisTickFormat=function(t){return arguments.length?(u=t,m):u},m.yAxisTickFormat=function(t){return arguments.length?(f=t,m):f},m.xAxisHide=function(t){return arguments.length?(d=t,m):d},m.yAxisHide=function(t){return arguments.length?(p=t,m):p},m.legendHide=function(t){return arguments.length?(g=t,m):g},m.onClick=function(t){return arguments.length?(h=t,m):h},m.onMouseOver=function(t){return arguments.length?(x=t,m):x},m},Object.defineProperty(t,"__esModule",{value:!0})});