!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.d3=t.d3||{})}(this,function(t){"use strict";t.heatmap=function(){var t="",e="",a="",r=960,n={top:20,right:0,bottom:50,left:50},l=null;function s(s){var o=s.datum(),i=o.rows,d=o.columns,c=o.values;t&&(n.top=n.top+50),e&&(n.top=n.top+20);var p=Math.floor(r/d.length),f=p*(i.length+2),u=0;for(let t=0;t<c.length;t++)for(let e=0;e<c[t].length;e++)c[t][e]>u&&(u=c[t][e]);l||(l=d3.scaleLinear().domain([0,u/2,u]).range(["#FFFFDD","#3E9583","#1F2D86"]));var g=s.append("svg").attr("width",r+n.left+n.right).attr("height",f+n.top+n.bottom).append("g").attr("transform","translate("+n.left+","+n.top+")"),h=d3.scaleLinear().domain([106,1999]).range([f,0]),m=d3.scaleLinear().domain([0,122]).range([0,r-n.left-n.right-40]);g.append("g").attr("transform","translate(0,-12)").attr("class","rowLabel axis").call(d3.axisLeft(h).ticks(20,"s")),g.append("g").attr("transform","translate(5,0)").attr("class","columnLabel axis").call(d3.axisTop(m).ticks(20,"s")),g.selectAll(".column").data(c).enter().append("g").each(function(t,e){d3.select(this).selectAll("rect").data(t.reverse()).enter().append("rect").attr("x",function(t){return e*p}).attr("y",function(t,e){return e*p}).attr("class","bordered").attr("width",p).attr("height",p).style("stroke","white").style("stroke-opacity",.6).style("fill",function(t){return l(t)})}),t&&g.append("text").attr("class","title").attr("x",r/2).attr("y",-50).style("text-anchor","middle").text(t),e&&g.append("text").attr("class","subtitle").attr("x",r/2).attr("y",-30).style("text-anchor","middle").text(e);var x=d3.scaleLinear().domain([0,u]).range([0,r]),y=x.domain(),v=[];y[2]=y[1]-y[0];for(var b=0;b<10;b++)v.push(b*y[2]/9+y[0]);g.append("defs").append("linearGradient").attr("id","legend-traffic").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").selectAll("stop").data(d3.range(10)).enter().append("stop").attr("offset",function(t,e){return x(v[e])/r}).attr("stop-color",function(t,e){return l(v[e])});var L=Math.min(.8*r,400),w=g.append("g").attr("class","legendWrapper").attr("transform","translate("+r/2+","+(p*i.length+40)+")");w.append("rect").attr("class","legendRect").attr("x",-L/2).attr("y",0).attr("width",L).attr("height",10).style("fill","url(#legend-traffic)"),w.append("text").attr("class","legendTitle").attr("x",0).attr("y",-10).style("text-anchor","middle").text(a);var k=d3.scaleLinear().range([-L/2,L/2]).domain([0,u]),F=d3.axisBottom().ticks(5).scale(k);w.append("g").attr("class","axis").attr("transform","translate(0,10)").call(F)}return s.title=function(e){return arguments.length?(t=e,s):t},s.subtitle=function(t){return arguments.length?(e=t,s):e},s.legendLabel=function(t){return arguments.length?(a=t,s):a},s.width=function(t){return arguments.length?(r=t,s):r},s.margin=function(t){return arguments.length?(n=t,s):n},s.colorScale=function(t){return arguments.length?(l=t,s):l},s},Object.defineProperty(t,"__esModule",{value:!0})});