!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.d3=t.d3||{})}(this,function(t){"use strict";t.heatmap=function(){var t="",e="",n="",r=960,a={top:0,right:0,bottom:0,left:0},l=null,o=null,i=null,s=function(t){return t},c=function(t){return t},d=d3.format(".0f"),u=d3.format(".2s"),f=!1,p=!1,g=!1;function x(x){var h=x.datum(),m=h.rows,y=h.columns,b=h.values;t&&(a.top=a.top+50),e&&(a.top=a.top+20),g||(a.bottom=a.bottom+50),f||(a.top=a.top+20),p||(a.left=a.left+50);var v=Math.floor(r/y.length),L=v*(m.length+2),A=0;for(let t=0;t<b.length;t++)for(let e=0;e<b[t].length;e++)b[t][e]>A&&(A=b[t][e]);l||(l=d3.scaleLinear().domain([0,A/2,A]).range(["#FFFFDD","#3E9583","#1F2D86"]));var F=x.append("svg").attr("width",r+a.left+a.right).attr("height",L+a.top+a.bottom).append("g").attr("transform","translate("+a.left+","+a.top+")");if(!p)if(i){var k=d3.scaleLinear().domain(i).range([L,0]);F.append("g").attr("transform","translate(3,-12)").attr("class","rowLabel axis").call(d3.axisLeft(k).ticks(20).tickFormat(u))}else F.selectAll(".rowLabel").data(m.reverse()).enter().append("text").text(c).attr("x",0).attr("y",function(t,e){return e*v}).style("text-anchor","end").attr("transform","translate(-6,"+v/1.1+")").attr("class","rowLabel mono axis");if(!f)if(o){var w=d3.scaleLinear().domain(o).range([0,r-a.left-a.right-40]);F.append("g").attr("transform","translate(5,3)").attr("class","columnLabel axis").call(d3.axisTop(w).ticks(20).tickFormat(d))}else F.selectAll(".columnLabel").data(y).enter().append("text").text(s).attr("y",function(t,e){return e*v}).attr("x",0).style("text-anchor","beginning").attr("transform","translate("+v/1.4+", -6) rotate(270)").attr("class","columnLabel mono axis");if(F.selectAll("g.column").data(b).enter().append("g").each(function(t,e){d3.select(this).selectAll("rect").data(t.reverse()).enter().append("rect").attr("x",function(t){return e*v}).attr("y",function(t,e){return e*v}).attr("class","bordered").attr("width",v).attr("height",v).style("stroke","white").style("stroke-opacity",.6).style("fill",function(t){return l(t)})}),t&&F.append("text").attr("class","title").attr("x",r/2).attr("y",-60).style("text-anchor","middle").text(t),e&&F.append("text").attr("class","subtitle").attr("x",r/2).attr("y",-40).style("text-anchor","middle").text(e),!g){var T=d3.scaleLinear().domain([0,A]).range([0,r]),D=T.domain(),H=[];D[2]=D[1]-D[0];for(var M=0;M<10;M++)H.push(M*D[2]/9+D[0]);F.append("defs").append("linearGradient").attr("id","legend-traffic").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").selectAll("stop").data(d3.range(10)).enter().append("stop").attr("offset",function(t,e){return T(H[e])/r}).attr("stop-color",function(t,e){return l(H[e])});var S=Math.min(.8*r,400),j=F.append("g").attr("class","legendWrapper").attr("transform","translate("+r/2+","+(v*m.length+40)+")");j.append("rect").attr("class","legendRect").attr("x",-S/2).attr("y",0).attr("width",S).attr("height",10).style("fill","url(#legend-traffic)"),j.append("text").attr("class","legendTitle").attr("x",0).attr("y",-10).style("text-anchor","middle").text(n);var _=d3.scaleLinear().range([-S/2,S/2]).domain([0,A]),B=d3.axisBottom().ticks(5).scale(_);j.append("g").attr("class","axis").attr("transform","translate(0,10)").call(B)}}return x.title=function(e){return arguments.length?(t=e,x):t},x.subtitle=function(t){return arguments.length?(e=t,x):e},x.legendLabel=function(t){return arguments.length?(n=t,x):n},x.width=function(t){return arguments.length?(r=t,x):r},x.margin=function(t){return arguments.length?(a=t,x):a},x.colorScale=function(t){return arguments.length?(l=t,x):l},x.xAxisScale=function(t){return arguments.length?(o=t,x):o},x.yAxisScale=function(t){return arguments.length?(i=t,x):i},x.xAxisLabelFormat=function(t){return arguments.length?(s=t,x):s},x.yAxisLabelFormat=function(t){return arguments.length?(c=t,x):c},x.xAxisTickFormat=function(t){return arguments.length?(d=t,x):d},x.yAxisTickFormat=function(t){return arguments.length?(u=t,x):u},x.xAxisHide=function(t){return arguments.length?(f=t,x):f},x.yAxisHide=function(t){return arguments.length?(p=t,x):p},x.legendHide=function(t){return arguments.length?(g=t,x):g},x},Object.defineProperty(t,"__esModule",{value:!0})});