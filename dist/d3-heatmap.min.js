!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.d3=t.d3||{})}(this,function(t){"use strict";t.heatmap=function(){var t="",e="",r="",a=960,n={top:20,right:-50,bottom:50,left:50},l=null;function o(o){var s=o.datum(),i=s.rows,d=s.columns,c=s.values;t&&(n.top=n.top+50),e&&(n.top=n.top+20);var u=Math.floor(a/d.length),p=u*(i.length+2),f=0;for(let t=0;t<c.length;t++)for(let e=0;e<c[t].length;e++)c[t][e]>f&&(f=c[t][e]);l||(l=d3.scale.linear().domain([0,f/2,f]).range(["#FFFFDD","#3E9583","#1F2D86"]));var h=o.append("svg").attr("width",a+n.left+n.right).attr("height",p+n.top+n.bottom).append("g").attr("transform","translate("+n.left+","+n.top+")");h.selectAll(".rowLabel").data(i.reverse()).enter().append("text").text(function(t){return t}).attr("x",0).attr("y",function(t,e){return e*u}).style("text-anchor","end").attr("transform","translate(-6,"+u/1.5+")").attr("class","rowLabel mono axis"),h.selectAll(".columnLabel").data(d).enter().append("text").text(function(t){return t}).attr("x",function(t,e){return e*u}).attr("y",0).style("text-anchor","middle").attr("transform","translate("+u/2+", -6)").attr("class","columnLabel mono axis"),h.selectAll("g").data(c).enter().append("g").each(function(t,e){d3.select(this).selectAll("rect").data(t.reverse()).enter().append("rect").attr("x",function(t){return e*u}).attr("y",function(t,e){return e*u}).attr("class","hour bordered").attr("width",u).attr("height",u).style("stroke","white").style("stroke-opacity",.6).style("fill",function(t){return l(t)})}),t&&h.append("text").attr("class","title").attr("x",a/2).attr("y",-50).style("text-anchor","middle").text(t),e&&h.append("text").attr("class","subtitle").attr("x",a/2).attr("y",-30).style("text-anchor","middle").text(e);var g=d3.scale.linear().domain([0,f]).range([0,a]),x=g.domain(),m=[];x[2]=x[1]-x[0];for(var y=0;y<10;y++)m.push(y*x[2]/9+x[0]);h.append("defs").append("linearGradient").attr("id","legend-traffic").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").selectAll("stop").data(d3.range(10)).enter().append("stop").attr("offset",function(t,e){return g(m[e])/a}).attr("stop-color",function(t,e){return l(m[e])});var v=Math.min(.8*a,400),b=h.append("g").attr("class","legendWrapper").attr("transform","translate("+a/2+","+(u*i.length+40)+")");b.append("rect").attr("class","legendRect").attr("x",-v/2).attr("y",0).attr("width",v).attr("height",10).style("fill","url(#legend-traffic)"),b.append("text").attr("class","legendTitle").attr("x",0).attr("y",-10).style("text-anchor","middle").text(r);var w=d3.scale.linear().range([-v/2,v/2]).domain([0,f]),A=d3.svg.axis().orient("bottom").ticks(5).scale(w);b.append("g").attr("class","axis").attr("transform","translate(0,10)").call(A)}return o.title=function(e){return arguments.length?(t=e,o):t},o.subtitle=function(t){return arguments.length?(e=t,o):e},o.legendLabel=function(t){return arguments.length?(r=t,o):r},o.width=function(t){return arguments.length?(a=t,o):a},o.margin=function(t){return arguments.length?(n=t,o):n},o.colorScale=function(t){return arguments.length?(l=t,o):l},o},Object.defineProperty(t,"__esModule",{value:!0})});